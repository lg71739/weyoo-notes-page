import{_ as t,r,o as l,c as d,d as a,e,b as n,f as i}from"./app-f939780d.js";const c={},h=i(`<h2 id="es的安装" tabindex="-1"><a class="header-anchor" href="#es的安装" aria-hidden="true">#</a> ES的安装</h2><h3 id="下载镜像" tabindex="-1"><a class="header-anchor" href="#下载镜像" aria-hidden="true">#</a> 下载镜像</h3><p>使用如下命令拉取ElasticSearch镜像并指定版本号7.17.9</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull elasticsearch:7.17.9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/raw/images/pictures/2023/02/15_22_39_42_202302152239305.png" alt="image-20230215223936207" tabindex="0" loading="lazy"><figcaption>image-20230215223936207</figcaption></figure><h3 id="创建配置文件" tabindex="-1"><a class="header-anchor" href="#创建配置文件" aria-hidden="true">#</a> 创建配置文件</h3><h4 id="创建配置文件夹" tabindex="-1"><a class="header-anchor" href="#创建配置文件夹" aria-hidden="true">#</a> 创建配置文件夹</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /mydata/elasticsearch/config
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /mydata/elasticsearch/data
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /mydata/elasticsearch/plugins
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="创建配置文件-1" tabindex="-1"><a class="header-anchor" href="#创建配置文件-1" aria-hidden="true">#</a> 创建配置文件</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;http.host: 0.0.0.0&quot;</span><span class="token operator">&gt;&gt;</span>/mydata/elasticsearch/config/elasticsearch.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="修改文件权限" tabindex="-1"><a class="header-anchor" href="#修改文件权限" aria-hidden="true">#</a> 修改文件权限</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">777</span> /mydata/elasticsearch/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="创建实例" tabindex="-1"><a class="header-anchor" href="#创建实例" aria-hidden="true">#</a> 创建实例</h3><h4 id="启动" tabindex="-1"><a class="header-anchor" href="#启动" aria-hidden="true">#</a> 启动</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token parameter variable">--name</span> elasticsearch <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Xms64m --Xmx256m&quot;</span> <span class="token parameter variable">-v</span> /mydata/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml <span class="token parameter variable">-v</span> /mydata/elasticsearch/data:/usr/share/elasticsearch/data <span class="token parameter variable">-v</span> /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins <span class="token parameter variable">-d</span> elasticsearch:7.17.9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/02/16_20_45_50_image-20230216204544322.png" alt="image-20230216204544322" tabindex="0" loading="lazy"><figcaption>image-20230216204544322</figcaption></figure><h3 id="查看运行情况" tabindex="-1"><a class="header-anchor" href="#查看运行情况" aria-hidden="true">#</a> 查看运行情况</h3><h4 id="命令查看" tabindex="-1"><a class="header-anchor" href="#命令查看" aria-hidden="true">#</a> 命令查看</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/02/16_20_55_19_image-20230216205519082.png" alt="image-20230216205519082" tabindex="0" loading="lazy"><figcaption>image-20230216205519082</figcaption></figure><h4 id="浏览器查看" tabindex="-1"><a class="header-anchor" href="#浏览器查看" aria-hidden="true">#</a> 浏览器查看</h4><p>通过浏览器访问 <code>IP地址:9200</code> 查看</p><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/02/16_21_14_28_image-20230216211428299.png" alt="image-20230216211428299" tabindex="0" loading="lazy"><figcaption>image-20230216211428299</figcaption></figure><h2 id="安装插件" tabindex="-1"><a class="header-anchor" href="#安装插件" aria-hidden="true">#</a> 安装插件</h2>`,24),p={href:"https://github.com/medcl/elasticsearch-analysis-ik",target:"_blank",rel:"noopener noreferrer"},o={href:"https://github.com/medcl/elasticsearch-analysis-ik/releases",target:"_blank",rel:"noopener noreferrer"},u=i(`<div class="hint-container warning"><p class="hint-container-title">版本对应</p><p><strong>ik分词器的版本必须与ElasticSearch版本完全匹配</strong></p><table><thead><tr><th>IK version</th><th>ES version</th></tr></thead><tbody><tr><td>master</td><td>7.x -&gt; master</td></tr><tr><td>6.x</td><td>6.x</td></tr><tr><td>5.x</td><td>5.x</td></tr><tr><td>1.10.6</td><td>2.4.6</td></tr><tr><td>1.9.5</td><td>2.3.5</td></tr><tr><td>1.8.1</td><td>2.2.1</td></tr><tr><td>1.7.0</td><td>2.1.1</td></tr><tr><td>1.5.0</td><td>2.0.0</td></tr><tr><td>1.2.6</td><td>1.0.0</td></tr></tbody></table><p>但是部分版本会出现不存在的情况。</p><p>此时可以通过下载相近的版本，解压后修改plugin-descriptor.properties文件里面的elasticsearch.version就可以</p></div><h3 id="分词插件的安装" tabindex="-1"><a class="header-anchor" href="#分词插件的安装" aria-hidden="true">#</a> 分词插件的安装</h3><p>安装方式主要分为三种:</p><ol><li>在容器内部通过<code>elasticsearch-plugin</code>命令安装</li><li>在虚拟机中下载解压到挂在的plugins文件夹</li><li>下载、解压然后放到虚拟机的plugins文件夹下</li></ol><h4 id="方式一-使用elasticsearch-plugin安装" tabindex="-1"><a class="header-anchor" href="#方式一-使用elasticsearch-plugin安装" aria-hidden="true">#</a> 方式一: 使用<code>elasticsearch-plugin</code>安装</h4><p>进入容器内部命令行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> elasticsearch /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>执行安装命令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./bin/elasticsearch-plugin <span class="token function">install</span> https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.7.0/elasticsearch-analysis-ik-8.7.0.zip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="方式二-虚拟机下载并安装" tabindex="-1"><a class="header-anchor" href="#方式二-虚拟机下载并安装" aria-hidden="true">#</a> 方式二: 虚拟机下载并安装</h4><p>虚拟机下载ik分词器</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v8.7.0/elasticsearch-analysis-ik-8.7.0.zip
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>解压</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">unzip</span> elasticsearch-analysis-ik-8.7.0.zip /mydata/elasticsearch/plugins/ik/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="方式三-手动下载解压然后上传" tabindex="-1"><a class="header-anchor" href="#方式三-手动下载解压然后上传" aria-hidden="true">#</a> 方式三: 手动下载解压然后上传</h4><p>自己从github上下载下对应的安装包，然后解压，上传到·/mydata/elasticsearch/plugins/ik·文件夹下</p><h3 id="分词器安装的验证" tabindex="-1"><a class="header-anchor" href="#分词器安装的验证" aria-hidden="true">#</a> 分词器安装的验证</h3><p>在容器内执行如下命令， 查看已安装的插件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./bin/elasticsearch-plugin list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/05/30_17_40_51_image-20230530174044568.png" alt="image-20230530174044568" tabindex="0" loading="lazy"><figcaption>image-20230530174044568</figcaption></figure><p>在Kibana中执行如下命令，查看分词效果</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GET _analyze
<span class="token punctuation">{</span>
  <span class="token string">&quot;analyzer&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;ik_smart&quot;</span>,
  <span class="token string">&quot;text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;我是一个中国人&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/05/31_10_1_6_image-20230531100059591.png" alt="image-20230531100059591" tabindex="0" loading="lazy"><figcaption>image-20230531100059591</figcaption></figure>`,23);function m(g,b){const s=r("ExternalLinkIcon");return l(),d("div",null,[h,a("blockquote",null,[a("p",null,[e("项目地址: "),a("a",p,[e("https://github.com/medcl/elasticsearch-analysis-ik"),n(s)])]),a("p",null,[e("下载地址: "),a("a",o,[e("https://github.com/medcl/elasticsearch-analysis-ik/releases"),n(s)])])]),u])}const k=t(c,[["render",m],["__file","1676471779942.html.vue"]]);export{k as default};
