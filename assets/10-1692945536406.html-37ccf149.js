import{_ as a,o as s,c as n,f as e}from"./app-86069fa5.js";const i={},l=e(`<h1 id="mysql的安装与配置" tabindex="-1"><a class="header-anchor" href="#mysql的安装与配置" aria-hidden="true">#</a> MySQL的安装与配置</h1><h2 id="环境准备" tabindex="-1"><a class="header-anchor" href="#环境准备" aria-hidden="true">#</a> 环境准备</h2><h3 id="查看并卸载预装mariadb" tabindex="-1"><a class="header-anchor" href="#查看并卸载预装mariadb" aria-hidden="true">#</a> 查看并卸载预装MariaDB</h3><p>由于CentOS7默认预装MariaDB，分别执行如下命令，将其卸载</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#查看系统自带的mariadb</span>
<span class="token function">rpm</span> -qa<span class="token operator">|</span><span class="token function">grep</span> mariadb
<span class="token comment">#卸载自带的mariadb</span>
<span class="token function">rpm</span> <span class="token parameter variable">-e</span> <span class="token parameter variable">--nodeps</span> mariadb-libs-5.5.44-2.el7.centos.x86_64
<span class="token comment">#删除etc目录下的my.cnf</span>
<span class="token function">rm</span> /etc/my.cnf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_49_35_20ab22f754fd48fda23374519b696ec9.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="检查mysql是否存在" tabindex="-1"><a class="header-anchor" href="#检查mysql是否存在" aria-hidden="true">#</a> 检查mysql是否存在</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>rpm -qa | grep mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="查看和创建mysql用户和组" tabindex="-1"><a class="header-anchor" href="#查看和创建mysql用户和组" aria-hidden="true">#</a> 查看和创建mysql用户和组</h3><p>出于安全原因，在系统中创建一个mysql用户和用户组，依次执行如下命令，并设置好mysql用户的密码即可。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 检查mysql组和用户是否存在，如无则创建</span>
<span class="token function">cat</span> /etc/group <span class="token operator">|</span> <span class="token function">grep</span> mysql 
<span class="token function">cat</span> /etc/passwd <span class="token operator">|</span> <span class="token function">grep</span> mysql 
<span class="token comment">#创建mysql用户组</span>
<span class="token comment"># 创建mysql用户组</span>
<span class="token function">groupadd</span> mysql
<span class="token comment"># 创建一个用户名为mysql的用户，并加入mysql用户组</span>
<span class="token function">useradd</span> <span class="token parameter variable">-g</span> mysql mysql
<span class="token comment"># 制定password 为111111，输入New password ，重复retype new password</span>
<span class="token function">passwd</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_49_30_4d737ca085974b2aac83ada65de152f1.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h2 id="mysql的安装" tabindex="-1"><a class="header-anchor" href="#mysql的安装" aria-hidden="true">#</a> Mysql的安装</h2><h3 id="下载安装包并解压" tabindex="-1"><a class="header-anchor" href="#下载安装包并解压" aria-hidden="true">#</a> 下载安装包并解压</h3><p>前往mysql官网下载对应的Linux安装包mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz，上传至服务器/home目录下，</p><p>并执行如下命令，完成解压操作</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/local
<span class="token comment"># 解压缩</span>
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> /home/mysql-5.7.31-linux-glibc2.12-x86_64.tar.gz
<span class="token comment"># 文件夹重命名</span>
<span class="token function">mv</span> mysql-5.7.31-linux-glibc2.12-x86_64 mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="更改所属的组和用户" tabindex="-1"><a class="header-anchor" href="#更改所属的组和用户" aria-hidden="true">#</a> 更改所属的组和用户</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql mysql/
<span class="token function">chgrp</span> <span class="token parameter variable">-R</span> mysql mysql/
<span class="token builtin class-name">cd</span> mysql/
<span class="token function">mkdir</span> data
<span class="token function">chown</span> <span class="token parameter variable">-R</span> mysql:mysql data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="在-etc创建my-cnf文件" tabindex="-1"><a class="header-anchor" href="#在-etc创建my-cnf文件" aria-hidden="true">#</a> 在/etc创建my.cnf文件</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 进入/etc文件夹下</span>
<span class="token builtin class-name">cd</span> /etc
<span class="token comment"># 创建my.cnf文件</span>
<span class="token function">touch</span> my.cnf 
<span class="token comment"># 编辑my.cnf</span>
<span class="token function">vim</span> my.cnf 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在my.cnf添加如下内容</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code>[mysql]
<span class="token comment"># 设置mysql客户端默认字符集</span>
<span class="token key attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token value attr-value">utf8 </span>

[mysqld]
<span class="token comment"># 设置3306端口</span>
<span class="token key attr-name">port</span> <span class="token punctuation">=</span> <span class="token value attr-value">3306 </span>
<span class="token comment"># 设置mysql的安装目录</span>
<span class="token key attr-name">basedir</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/mysql</span>
<span class="token comment"># 设置mysql数据库的数据的存放目录</span>
<span class="token key attr-name">datadir</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/local/mysql/data</span>
<span class="token comment"># 允许最大连接数</span>
<span class="token key attr-name">max_connections</span><span class="token punctuation">=</span><span class="token value attr-value">200</span>
<span class="token comment"># 服务端使用的字符集默认为8比特编码的latin1字符集</span>
<span class="token key attr-name">character-set-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8</span>
<span class="token comment"># 创建新表时将使用的默认存储引擎</span>
<span class="token key attr-name">default-storage-engine</span><span class="token punctuation">=</span><span class="token value attr-value">INNODB </span>
<span class="token key attr-name">lower_case_table_names</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token key attr-name">max_allowed_packet</span><span class="token punctuation">=</span><span class="token value attr-value">16M</span>
<span class="token key attr-name">sql_mode</span><span class="token punctuation">=</span><span class="token value attr-value">STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以通过<code>cat /etc/my.cnf</code>查看文档的内容</p><h3 id="执行安装" tabindex="-1"><a class="header-anchor" href="#执行安装" aria-hidden="true">#</a> 执行安装</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 进入mysql</span>
<span class="token builtin class-name">cd</span> /usr/local/mysql/ 
<span class="token comment"># 安装mysql</span>
bin/mysql_install_db <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql <span class="token parameter variable">--basedir</span><span class="token operator">=</span>/usr/local/mysql/ <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/usr/local/mysql/data/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_51_34_0f40116c9d524f75891fad1652239839.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><blockquote><p>如果出现如下提示:</p><p><code>error while loading shared libraries: libaio.so.1: cannot open shared object file: No such file or directory</code></p><p>**解决办法：**执行如下命令安装对应软件包即可</p><p><code>yum install -y libaio //安装后在初始化就OK了</code></p></blockquote><blockquote><p>安装mysql出现了3个warning信息。修改系统的max_open_files限制即可</p><p>解决办法:编辑/etc/security/limits.conf ,最后面增加两行</p><p><code>* hard nofile 65535</code></p><p><code>* soft nofile 65535</code></p></blockquote><h2 id="设置开机自启动" tabindex="-1"><a class="header-anchor" href="#设置开机自启动" aria-hidden="true">#</a> 设置开机自启动</h2><h3 id="编写启动脚本" tabindex="-1"><a class="header-anchor" href="#编写启动脚本" aria-hidden="true">#</a> 编写启动脚本</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cp</span> ./support-files/mysql.server /etc/init.d/mysqld
<span class="token function">chown</span> <span class="token number">777</span> /etc/my.cnf 
<span class="token function">chmod</span> +x /etc/init.d/mysqld
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动mysql" tabindex="-1"><a class="header-anchor" href="#启动mysql" aria-hidden="true">#</a> 启动mysql</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/etc/init.d/mysqld restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_52_42_8a3542ad420e4475ba5426f1d3cb2757.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><blockquote><p><strong>如果出现错误提示:</strong><code>MySQL manager or server PID file could not be found! [FAILED]</code></p><p><strong>解决办法:</strong></p><p>杀死相关进程，重启mysql</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1、查看进程</span>
<span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">grep</span> mysql
<span class="token comment"># 2、杀死进程(以实际查询出来的进程号为准)</span>
<span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token number">10031</span>
<span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token number">10220</span>
<span class="token comment"># 3、重启mysql</span>
/etc/init.d/mysqld restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="设置开机启动" tabindex="-1"><a class="header-anchor" href="#设置开机启动" aria-hidden="true">#</a> 设置开机启动</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chkconfig</span> <span class="token parameter variable">--level</span> <span class="token number">35</span> mysqld on
<span class="token function">chkconfig</span> <span class="token parameter variable">--list</span> mysqld
<span class="token function">chmod</span> +x /etc/rc.d/init.d/mysqld
<span class="token function">chkconfig</span> <span class="token parameter variable">--add</span> mysqld
<span class="token function">chkconfig</span> <span class="token parameter variable">--list</span> mysqld
<span class="token function">service</span> mysqld status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_53_9_d9ccfad513d34b46a423fd931dcc2d12.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="修改配置文件" tabindex="-1"><a class="header-anchor" href="#修改配置文件" aria-hidden="true">#</a> 修改配置文件</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vim /etc/profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加如下内容</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#SET MYSQL ENVIRONMENT
export PATH=$PATH:/usr/local/mysql/bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_47_9_3625656b5c5d46058466eb76e98da2b6.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>使配置文件生效</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="密码初始化与连接" tabindex="-1"><a class="header-anchor" href="#密码初始化与连接" aria-hidden="true">#</a> 密码初始化与连接</h2><h3 id="获取mysql初始密码" tabindex="-1"><a class="header-anchor" href="#获取mysql初始密码" aria-hidden="true">#</a> 获取mysql初始密码</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> /root/.mysql_secret
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_53_30_0f74316aa7294134966cd933d89cfba2.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="修改密码" tabindex="-1"><a class="header-anchor" href="#修改密码" aria-hidden="true">#</a> 修改密码</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
<span class="token builtin class-name">set</span> PASSWORD <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_54_6_3d1596bfd75c4b35b23b2b06e0c6ae14.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="添加远程访问权限" tabindex="-1"><a class="header-anchor" href="#添加远程访问权限" aria-hidden="true">#</a> 添加远程访问权限</h3><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>use mysql;
select host,user,authentication_string from mysql.user;
GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;root&#39; WITH GRANT OPTION;
FLUSH PRIVILEGES;

create user &#39;test&#39;@&#39;localhost&#39; identified by &#39;Test_2020!@#&#39;;
create user &#39;test&#39;@&#39;%&#39; identified by &#39;Test_2020!@#&#39;;
GRANT ALL PRIVILEGES ON *.* TO &#39;test&#39;@&#39;%&#39; IDENTIFIED BY &#39;Test_2020!@#&#39; WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON *.* TO &#39;test&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;Test_2020!@#&#39; WITH GRANT OPTION;
FLUSH PRIVILEGES;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_47_6_5740d948f7d74c5bbccc9fa97b6cf1ba.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="重启mysql" tabindex="-1"><a class="header-anchor" href="#重启mysql" aria-hidden="true">#</a> 重启mysql</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/etc/init.d/mysqld restart 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_14_54_31_6940633c274b4a2581b13369a3b693c2.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure>`,60),c=[l];function t(d,r){return s(),n("div",null,c)}const o=a(i,[["render",t],["__file","10-1692945536406.html.vue"]]);export{o as default};
