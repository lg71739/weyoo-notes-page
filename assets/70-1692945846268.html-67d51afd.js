import{_ as a,o as n,c as s,f as e}from"./app-19e0b0f0.js";const i={},r=e(`<h1 id="informix数据库的安装与配置" tabindex="-1"><a class="header-anchor" href="#informix数据库的安装与配置" aria-hidden="true">#</a> Informix数据库的安装与配置</h1><h2 id="基础安装" tabindex="-1"><a class="header-anchor" href="#基础安装" aria-hidden="true">#</a> 基础安装</h2><p>整个安装过程都以root用户运行</p><h3 id="创建informix用户组和用户" tabindex="-1"><a class="header-anchor" href="#创建informix用户组和用户" aria-hidden="true">#</a> 创建informix用户组和用户</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 创建informix用户组</span>
<span class="token function">groupadd</span> informix
<span class="token comment"># 创建informix用户</span>
<span class="token function">useradd</span> <span class="token parameter variable">-g</span> informix informix
<span class="token comment"># 设置informix用户密码,需要重复输入密码两次</span>
<span class="token function">passwd</span> informix
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建安装目录" tabindex="-1"><a class="header-anchor" href="#创建安装目录" aria-hidden="true">#</a> 创建安装目录</h3><p>通过如下命令创建安装目录: &quot;/opt/informix&quot;</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#创建文件夹</span>
<span class="token function">mkdir</span> /opt/informix
<span class="token comment">#赋权限给informix用户组用户</span>
<span class="token function">chown</span> informix.informix /opt/informix
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="设置环境变量" tabindex="-1"><a class="header-anchor" href="#设置环境变量" aria-hidden="true">#</a> 设置环境变量</h3><p>直接执行如下命令设置informix相关环境变量</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">INFORMIXDIR</span><span class="token operator">=</span>/opt/informix
<span class="token builtin class-name">export</span> INFORMIXDIR
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$INFORMIXDIR</span>/bin
<span class="token builtin class-name">export</span> <span class="token environment constant">PATH</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="复制文件并解压安装包" tabindex="-1"><a class="header-anchor" href="#复制文件并解压安装包" aria-hidden="true">#</a> 复制文件并解压安装包</h3><p>本例子将文件放置在/tmp/informix目录下（按照个人习惯即可）</p><p>然后执行命令解压缩</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /tmp/informix/
<span class="token function">tar</span> <span class="token parameter variable">-xvf</span> iif.11.50.UC4E.Linux-RHEL4.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行安装" tabindex="-1"><a class="header-anchor" href="#执行安装" aria-hidden="true">#</a> 执行安装</h3><p>执行<code>ids_install</code> 文件,执行informix的安装</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./ids_install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>几点需要注意的地方:</p><ol><li><p>如果遇到协议类的提示,输入1表示同意协议</p></li><li><p>出现下方提示,输入1<br><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_15_55_57_f88a19d4b22b4ff4af9b8b8bf80e7c22.png" alt="image.png" loading="lazy"></p></li></ol></blockquote><h2 id="配置informix" tabindex="-1"><a class="header-anchor" href="#配置informix" aria-hidden="true">#</a> 配置Informix</h2><p>以下命令在informix用户下执行</p><p>请通过<code>su - informix</code> 切换到informix用户</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">su</span> - informix
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="修改profile文件" tabindex="-1"><a class="header-anchor" href="#修改profile文件" aria-hidden="true">#</a> 修改profile文件</h3><p>执行命令</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vim ~/.bash_profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改 &quot;~/.bash_profile&quot;文件，加入如下环境变量</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">INFORMIXDIR</span><span class="token operator">=</span>/opt/informix
<span class="token builtin class-name">export</span> <span class="token assign-left variable">INFORMIXSQLHOSTS</span><span class="token operator">=</span>/opt/informix/etc/sqlhosts.ol_informix1210
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ONCONFIG</span><span class="token operator">=</span>onconfig.ol_informix1210
<span class="token builtin class-name">export</span> <span class="token assign-left variable">INFORMIXSERVER</span><span class="token operator">=</span>ol_informix1210
<span class="token builtin class-name">export</span> INFORMIXDIR INFORMIXSERVER ONCONFIG INFORMIXSQLHOSTS
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$INFORMIXDIR</span>/bin:.:<span class="token environment constant">$PATH</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行如下命令,使修改生效</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">.</span> ~/.bash_profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_15_57_23_c03dfbd1f43342e9acf232a5b086ae60.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="编辑配置文件" tabindex="-1"><a class="header-anchor" href="#编辑配置文件" aria-hidden="true">#</a> 编辑配置文件</h3><p>编辑&quot;onconfig.ol_informix1210&quot;，修改或添加以下内容</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code># 修改<span class="token constant">SERVERNUM</span> <span class="token punctuation">,</span><span class="token number">0</span><span class="token operator">~</span><span class="token number">255</span>之间即可<span class="token punctuation">,</span>保证唯一
<span class="token constant">SERVERNUM</span> <span class="token number">49</span> 
# 修改<span class="token constant">FULL_DISK</span>
<span class="token constant">FULL_DISK_INIT</span>  <span class="token number">1</span>
# 修改<span class="token constant">NETTYPE</span>
<span class="token constant">NETTYPE</span> soctcp<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token constant">CPU</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="授权数据库空间文件" tabindex="-1"><a class="header-anchor" href="#授权数据库空间文件" aria-hidden="true">#</a> 授权数据库空间文件</h3><p><strong>注意:“rootdbs”文件权限必须是：660</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>cd <span class="token operator">/</span>opt<span class="token operator">/</span>informix<span class="token operator">/</span>storage
chmod <span class="token number">660</span> rootdbs 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改sqlhosts文件" tabindex="-1"><a class="header-anchor" href="#修改sqlhosts文件" aria-hidden="true">#</a> 修改sqlhosts文件</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 编辑文件</span>
<span class="token function">vim</span> /opt/informix/etc/sqlhosts.ol_informix1210
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>文件内容如下:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 注意:此处只开放了内网TCP的监听
ol_informix1210 onsoctcp localhost ol_informix1210 
dr_informix1210 drsoctcp localhost dr_informix1210 
lo_informix1210 onsoctcp localhost lo_informix1210 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>**注意:**informix默认只开启了内网的TCP监听</p><p>如果需要远程访问的话,需要将localhost段设为星号*</p></blockquote><blockquote><p><strong>解析:</strong></p><p>tramsserver： 是数据库服务器名，和环境变量中的一样</p><p>onipcshm/onsoctcp： 使用的协议名称，连接数据库的两种方式</p><p>localhost： 主机名，和/etc/hosts里的一样</p><p>informix_services： 服务名，和/etc/services中的一样</p></blockquote><p><strong>这边应该是我卡了最久的地方了,来来回回的重置服务器,本地虚拟机测试,折腾来折腾去,端口一直访问不通,telnet无效<br> 最后,在看到了127.0.0.1的TCP时才想到了问题所在!!!<br> 终于得以解决</strong></p><h2 id="数据库初始化和连接" tabindex="-1"><a class="header-anchor" href="#数据库初始化和连接" aria-hidden="true">#</a> 数据库初始化和连接</h2><h3 id="执行初始化" tabindex="-1"><a class="header-anchor" href="#执行初始化" aria-hidden="true">#</a> 执行初始化</h3><p>执行如下命令,进行数据库初始化</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#第一次启动的时候需加 -ivy参数，以后正常启动时直接 oninit</span>
oninit <span class="token parameter variable">-ivy</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果没有出现error或者warning的时提示,如下图所示说明执行成功。</p><p>如果中间出现error或者warning，我们可以man一下日志文件（/opt/IBM/informix/online.log)，来看看是什么问题。</p><p>接下来，到/opt/informix/data 查看一下datadbs.dat文件的大小，如果不为0，那么说明数据库创建成功。</p><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_15_58_38_35cb5eaa85244bdca2bc7e8c73232573.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="连接数据库" tabindex="-1"><a class="header-anchor" href="#连接数据库" aria-hidden="true">#</a> 连接数据库</h3><p>使用如下命令,连接数据库</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>onstat <span class="token parameter variable">-i</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果出现如下提示,说明数据库状态正常</p><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_15_58_53_c1c9ba5425b54d48b06e43883dd8b574.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><blockquote><p>输入 q 就可以 退出 onstat</p></blockquote><hr><h3 id="端口查看" tabindex="-1"><a class="header-anchor" href="#端口查看" aria-hidden="true">#</a> 端口查看</h3><h4 id="通过netstat命令查看" tabindex="-1"><a class="header-anchor" href="#通过netstat命令查看" aria-hidden="true">#</a> 通过netstat命令查看</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">netstat</span> -apn<span class="token operator">|</span><span class="token function">grep</span> oninit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_16_1_53_8d99001bf6c9497287482bdefe9157f6.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h4 id="通过-etc-services文件查看" tabindex="-1"><a class="header-anchor" href="#通过-etc-services文件查看" aria-hidden="true">#</a> 通过/etc/services文件查看</h4><p>执行命令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>view /etc/services
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>基本在文件末尾(输入G即可到达文件末尾)</p><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/08/25_15_59_30_f552be31979e4f75b12a03159a14e415.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><h3 id="其他常用命令" tabindex="-1"><a class="header-anchor" href="#其他常用命令" aria-hidden="true">#</a> 其他常用命令</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#关闭数据库</span>
onmode <span class="token parameter variable">-ky</span>
<span class="token comment"># 清空共享内存及缓存</span>
<span class="token comment">#onclean -ky</span>
<span class="token comment"># 查看服务状态</span>
<span class="token comment">#onstat </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,70),l=[r];function t(d,o){return n(),s("div",null,l)}const p=a(i,[["render",t],["__file","70-1692945846268.html.vue"]]);export{p as default};
