import{_ as a,o as n,c as s,f as e}from"./app-709e4b28.js";const t={},i=e(`<h1 id="逻辑删除" tabindex="-1"><a class="header-anchor" href="#逻辑删除" aria-hidden="true">#</a> 逻辑删除</h1><h2 id="物理删除和逻辑删除" tabindex="-1"><a class="header-anchor" href="#物理删除和逻辑删除" aria-hidden="true">#</a> 物理删除和逻辑删除</h2><h3 id="物理删除" tabindex="-1"><a class="header-anchor" href="#物理删除" aria-hidden="true">#</a> 物理删除</h3><p>真实删除，将对应数据从数据库中删除，之后查询不到此条被删除的数据</p><h3 id="逻辑删除-1" tabindex="-1"><a class="header-anchor" href="#逻辑删除-1" aria-hidden="true">#</a> 逻辑删除</h3><p>假删除，将对应数据中代表是否被删除字段的状态修改为“被删除状态”，之后在数据库中仍旧能看到此条数据记录</p><h2 id="使用场景" tabindex="-1"><a class="header-anchor" href="#使用场景" aria-hidden="true">#</a> 使用场景</h2><p>可以进行数据恢复</p><h2 id="如何使用" tabindex="-1"><a class="header-anchor" href="#如何使用" aria-hidden="true">#</a> 如何使用</h2><h3 id="数据库设置删除标识位" tabindex="-1"><a class="header-anchor" href="#数据库设置删除标识位" aria-hidden="true">#</a> 数据库设置删除标识位</h3><p>数据库中创建逻辑删除状态列，设置默认值为0</p><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/03/15_15_13_54_15_15_7_56_image-20220520134529809.png" alt="image-20220520134529809" tabindex="0" loading="lazy"><figcaption>image-20220520134529809</figcaption></figure><h3 id="实体类添加-tablelogic注解" tabindex="-1"><a class="header-anchor" href="#实体类添加-tablelogic注解" aria-hidden="true">#</a> 实体类添加@TableLogic注解</h3><p>实体类中添加逻辑删除属性</p><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/03/15_14_59_13_image-20220520134636112.png" alt="image-20220520134636112" tabindex="0" loading="lazy"><figcaption>image-20220520134636112</figcaption></figure><h3 id="测试" tabindex="-1"><a class="header-anchor" href="#测试" aria-hidden="true">#</a> 测试</h3><p>测试删除功能，真正执行的是修改</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDeleteById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">deleteById</span><span class="token punctuation">(</span><span class="token number">1527472864163348482L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&quot;删除成功！&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;删除失败！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;受影响的行数为：&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/03/15_15_0_36_image-20220520135637388.png" alt="image-20220520135637388" tabindex="0" loading="lazy"><figcaption>image-20220520135637388</figcaption></figure><p>此时执行查询方法，查询的结果为自动添加条件<code>is_deleted=0</code></p><figure><img src="https://jihulab.com/byzh123/images/-/raw/images/pictures/2023/03/15_14_59_13_image-20220520140036445.png" alt="image-20220520140036445" tabindex="0" loading="lazy"><figcaption>image-20220520140036445</figcaption></figure>`,21),p=[i];function c(o,r){return n(),s("div",null,p)}const u=a(t,[["render",c],["__file","10-1678862043480.html.vue"]]);export{u as default};
